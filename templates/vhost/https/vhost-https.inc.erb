# generated by puppet from apache/templates/http/vhost-https.inc.erb
# used by apache/manifests/vhost/https.pp

<VirtualHost <%= @virtualhost %>:443>

    ServerName <%= @server_name %>
<% if @server_aliases -%>
<% @server_aliases.each do |server_alias| -%>
    ServerAlias <%= server_alias %>
<% end -%>
<% end -%>

<% if @default_include && !@default_include.empty? -%>
    Include conf.d/<%= @default %>
<% else -%>
    DocumentRoot /var/www/html
<% end -%>

<% if @includes -%>

    # Additional config snippets from includes
<% @includes.each do |file| -%>
    Include conf.d/<%= file %>
<% end -%>
<% end -%>

    # SSL configuration
    SSLEngine on
    SSLProtocol all -SSLv2
    SSLCipherSuite HIGH!ADH
    SSLCertificateFile /etc/pki/tls/certs/<%= @certname %>.crt
    SSLCertificateKeyFile /etc/pki/tls/private/<%= @certname %>.key
<% if has_variable?("bundlename") and @bundlename -%>
    SSLCACertificateFile /etc/pki/tls/certs/<%= @bundlename %>.crt
<% end -%>


    CustomLog logs/<%= @name %>-ssl-access_log combined
    CustomLog logs/<%= @name %>-ssl-access_timed_log timed_combined
    ErrorLog logs/<%= @name %>-ssl-error_log

</VirtualHost>
